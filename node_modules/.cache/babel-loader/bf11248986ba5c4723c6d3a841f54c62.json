{"ast":null,"code":"import _classCallCheck from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import\"bootstrap/dist/css/bootstrap.min.css\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var url1=\"http://localhost:4000/movieList/\";var DeleteBooking=/*#__PURE__*/function(_Component){_inherits(DeleteBooking,_Component);var _super=_createSuper(DeleteBooking);function DeleteBooking(props){var _this;_classCallCheck(this,DeleteBooking);_this=_super.call(this,props);_this.fetchMovies=function(){axios.get(url1).then(function(response){var data=response.data;var newState={moviesData:data,errorMessage:\"\"};_this.setState(newState);}).catch(function(error){if(error.response.status==404){_this.setState({errorMessage:\"Could not fetch booking data!\",successMessage:\"\"});}});/* \r\n          Send an AXIOS GET request to the url http://localhost:1050/bookings/ to fetch all the bookings \r\n          and handle the success and error cases appropriately.Set the isLoading to false once the request is complete\r\n        */};_this.deleteMovies=function(id){axios.delete(url1+id).then(function(res){_this.fetchMovies();_this.setState({successMessage:\"Booking deleted successfully!!\"});setTimeout(function(){return _this.props.history.push(\"/adminview\");},2500);}).catch(function(error){_this.setState({errorMessage:\"Booking deletion failed!\",successMessage:\"\"});});/*\r\n          Send an AXIOS DELETE request to the url http://localhost:1050/bookings/:id where id represents the booking\r\n          id for the selected booking which we want to delete\r\n          and handle the success and error cases appropriately \r\n        */};_this.state={moviesData:[],movieId:\"\",errorMessage:\"\",successMessage:\"\"};return _this;}_createClass(DeleteBooking,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchMovies();}},{key:\"render\",value:function render(){var _this2=this;var moviesData=this.state.moviesData;var rows=moviesData.map(function(movie){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:movie.movieId}),/*#__PURE__*/_jsx(\"td\",{children:movie.movieName}),/*#__PURE__*/_jsx(\"td\",{children:movie.cost}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(){return _this2.deleteMovies(movie.id);},className:\"btn btn-danger\",children:\"Delete\"})})]},movie.id);});return/*#__PURE__*/_jsx(\"div\",{className:\"GetBooking\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 offset-md-3\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-custom\",children:/*#__PURE__*/_jsx(\"h3\",{align:\"center\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Movie Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Movie Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Movie cost\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows})]}),\".\",/*#__PURE__*/_jsxs(\"div\",{align:\"center\",children:[/*#__PURE__*/_jsx(\"span\",{name:\"successMessage\",id:\"successMessage\",className:\"text text-success\",children:this.state.successMessage}),/*#__PURE__*/_jsx(\"span\",{name:\"errorMessage\",id:\"errorMessage\",className:\"text text-danger\",children:this.state.errorMessage})]})]})]})]})})});}}]);return DeleteBooking;}(Component);export{DeleteBooking as default};","map":{"version":3,"names":["React","Component","axios","url1","DeleteBooking","props","fetchMovies","get","then","response","data","newState","moviesData","errorMessage","setState","catch","error","status","successMessage","deleteMovies","id","delete","res","setTimeout","history","push","state","movieId","rows","map","movie","movieName","cost"],"sources":["C:/Users/karthick.raja01/Documents/Azure/firstapp/src/Admin/DeleteBooking.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport axios from 'axios';\r\nconst url1 = \"http://localhost:4000/movieList/\";\r\nexport default class DeleteBooking extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          moviesData: [],\r\n          movieId:\"\",\r\n          errorMessage: \"\",\r\n          successMessage: \"\",\r\n        };\r\n      }\r\n    \r\n      componentDidMount() {\r\n        this.fetchMovies();\r\n      }\r\n    \r\n      fetchMovies = () => {\r\n        axios\r\n          .get(url1)\r\n          .then((response) => {\r\n            const data = response.data;\r\n            const newState = {\r\n              moviesData: data,\r\n              errorMessage: \"\",\r\n            };\r\n            this.setState(newState);\r\n          })\r\n          .catch((error) => {\r\n            if (error.response.status == 404) {\r\n              this.setState({\r\n                errorMessage: \"Could not fetch booking data!\",\r\n                successMessage: \"\",\r\n              });\r\n            }\r\n          });\r\n        /* \r\n          Send an AXIOS GET request to the url http://localhost:1050/bookings/ to fetch all the bookings \r\n          and handle the success and error cases appropriately.Set the isLoading to false once the request is complete\r\n        */\r\n      };\r\n    \r\n      deleteMovies = (id) => {\r\n        axios\r\n          .delete(url1 + id)\r\n          .then((res) => {\r\n            this.fetchMovies();\r\n            this.setState({\r\n              successMessage: \"Booking deleted successfully!!\",\r\n            });\r\n            setTimeout(()=>this.props.history.push(\"/adminview\"), 2500);\r\n          })\r\n          .catch((error) => {\r\n              this.setState({\r\n                errorMessage: \"Booking deletion failed!\",\r\n                successMessage: \"\",\r\n              });\r\n            \r\n          });\r\n        /*\r\n          Send an AXIOS DELETE request to the url http://localhost:1050/bookings/:id where id represents the booking\r\n          id for the selected booking which we want to delete\r\n          and handle the success and error cases appropriately \r\n        */\r\n      };\r\n  render() {\r\n    const { moviesData } = this.state;\r\n    const rows = moviesData.map((movie) => (\r\n      <tr key={movie.id}>\r\n        <td>{movie.movieId}</td>\r\n        <td>{movie.movieName}</td>\r\n        <td>{movie.cost}</td>\r\n        <td>\r\n          <button \r\n            type=\"submit\"\r\n            onClick={()=>this.deleteMovies(movie.id)}\r\n            className=\"btn btn-danger\"\r\n          >\r\n            Delete\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    ));\r\n    return (\r\n        <div className=\"GetBooking\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 offset-md-3\">\r\n            <br />\r\n            <div className=\"card\">\r\n              <div className=\"card-header bg-custom\">\r\n                <h3 align=\"center\">\r\n                  \r\n                </h3>\r\n              </div>\r\n                <div className=\"card-body\">\r\n                  <table className=\"table table-striped\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Movie Id</th>\r\n                        <th>Movie Name</th>\r\n                        <th>Movie cost</th>\r\n                        <th>Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>{rows}</tbody>\r\n                  </table>.\r\n                  <div align=\"center\">\r\n                    <span\r\n                      name=\"successMessage\"\r\n                      id=\"successMessage\"\r\n                      className=\"text text-success\"\r\n                    >\r\n                      {this.state.successMessage}\r\n                    </span>\r\n                    <span\r\n                      name=\"errorMessage\"\r\n                      id=\"errorMessage\"\r\n                      className=\"text text-danger\"\r\n                    >\r\n                      {this.state.errorMessage}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}