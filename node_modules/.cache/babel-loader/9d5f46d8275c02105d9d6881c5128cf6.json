{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/karthick.raja01/Documents/Azure/firstapp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\karthick.raja01\\\\Documents\\\\Azure\\\\firstapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from'react';import axios from\"axios\";import{Link}from'react-router-dom';import\"bootstrap/dist/css/bootstrap.min.css\";import{authenticate}from\"../services/login.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formdata:{email:\"\",password:\"\"},formError:{emailErr:\"\",passErr:\"\"},successMessage:\"\",errMessage:\"\",showPassword:false};_this.handleChange=function(e){var name=e.target.name;var value=e.target.value;_this.setState({formdata:_objectSpread(_objectSpread({},_this.state.formdata),{},_defineProperty({},name,value))});_this.validateField(name,value);};_this.validateField=function(name,value){if(name===\"email\"){var emailRegx=/^([a-z][a-zA-Z0-9_]*(\\.[a-zA-Z][a-zA-Z0-9_]*)?@[a-z][a-zA-Z-0-9]*\\.[a-z]+(\\.[a-z]+)?)|[7-9][0-9]{9}$/;if(!value.match(emailRegx)){_this.setState({formError:_objectSpread(_objectSpread({},_this.state.formError),{},{emailErr:'Enter a valid Email, Eg:\"abc@gmail.com\"'})});}else{_this.setState({formError:_objectSpread(_objectSpread({},_this.state.formError),{},{emailErr:''})});}}else if(name===\"password\"){var passRegx=/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\\W).{7,20}$/;if(!value.match(passRegx)){_this.setState({formError:_objectSpread(_objectSpread({},_this.state.formError),{},{passErr:\"Password should contain atleast one speacial char,numbers,capital and small letter!\"})});}else{_this.setState({formError:_objectSpread(_objectSpread({},_this.state.formError),{},{passErr:\"\"})});}}};_this.formSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(formObj){var isAuthenticated;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authenticate(formObj.email,formObj.password);case 3:isAuthenticated=_context.sent;if(isAuthenticated){_this.setState({successMessage:\"Login Successfull\",errMessage:''});setTimeout(function(){return _this.props.history.push(\"/userview\");},2500);}else{_this.setState({errMessage:\"Invalid username or password!\",successMessage:\"\"});}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);_this.setState({errMessage:_context.t0.message,successMessage:\"\"});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleSubmit=function(e){e.preventDefault();var formObj={email:_this.state.formdata.email,password:_this.state.formdata.password};_this.formSubmit(formObj);};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"form\",{className:\"container\",onSubmit:this.handleSubmit,children:/*#__PURE__*/_jsx(\"div\",{className:\"CreateBooking\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 offset-md-3\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-custom\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"LOGIN\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Email Id:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",value:this.state.formdata.email,name:\"email\",onChange:this.handleChange}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:this.state.formError.emailErr}),/*#__PURE__*/_jsx(\"label\",{className:\"font-weight-bold\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:this.state.formdata.password,name:\"password\",onChange:this.handleChange}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:this.state.formError.passErr})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{width:\"500px\"},disabled:!(this.state.formError.emailErr===\"\"&&this.state.formError.passErr===\"\"),children:\"Login\"})}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"btn btn-link\",children:\"Register\"}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-success\",children:this.state.successMessage})}),/*#__PURE__*/_jsx(\"div\",{align:\"center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:this.state.errMessage})})]})]})]})})})});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"names":["React","Component","axios","Link","authenticate","Login","state","formdata","email","password","formError","emailErr","passErr","successMessage","errMessage","showPassword","handleChange","e","name","target","value","setState","validateField","emailRegx","match","passRegx","formSubmit","formObj","isAuthenticated","setTimeout","props","history","push","message","handleSubmit","preventDefault","width"],"sources":["C:/Users/karthick.raja01/Documents/Azure/firstapp/src/component/Login.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport axios from \"axios\";\r\nimport { Link } from 'react-router-dom';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { authenticate } from \"../services/login.service\";\r\nexport default class Login extends Component {\r\n  state={\r\n    formdata:{\r\n        email:\"\",\r\n        password: \"\",\r\n    },\r\n    formError:{\r\n        emailErr: \"\",\r\n        passErr: \"\",\r\n    },\r\n    \r\n    successMessage: \"\",\r\n    errMessage: \"\",\r\n    showPassword: false,\r\n    \r\n}\r\n\r\nhandleChange = (e) => {\r\n  const name = e.target.name;\r\n  const value = e.target.value;\r\n  this.setState({\r\n      formdata: {\r\n        ...this.state.formdata,\r\n          [name]: value\r\n      }\r\n  })\r\n  this.validateField(name, value);\r\n};\r\n        \r\n    validateField = (name, value) => {\r\n      if (name === \"email\") {\r\n        let emailRegx =\r\n          /^([a-z][a-zA-Z0-9_]*(\\.[a-zA-Z][a-zA-Z0-9_]*)?@[a-z][a-zA-Z-0-9]*\\.[a-z]+(\\.[a-z]+)?)|[7-9][0-9]{9}$/;\r\n        if (!value.match(emailRegx)) {\r\n          this.setState({\r\n              formError:{\r\n                ...this.state.formError,\r\n                  emailErr:'Enter a valid Email, Eg:\"abc@gmail.com\"'\r\n              }\r\n          })\r\n        } else {\r\n          this.setState({\r\n              formError:{\r\n                ...this.state.formError,\r\n                  emailErr:''\r\n              }\r\n          })          }\r\n      } else if (name === \"password\") {\r\n        let passRegx = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\\W).{7,20}$/;\r\n        if (!value.match(passRegx)) {\r\n          this.setState({\r\n              formError:{\r\n                ...this.state.formError,\r\n                  passErr:\"Password should contain atleast one speacial char,numbers,capital and small letter!\"\r\n              }\r\n          })\r\n        } else {\r\n          this.setState({\r\n              formError:{\r\n                ...this.state.formError,\r\n                  passErr:\"\"\r\n              }\r\n          })\r\n        }\r\n      }\r\n    };\r\n    \r\n    formSubmit = async (formObj) => {\r\n      try {\r\n        const isAuthenticated = await authenticate(\r\n          formObj.email,\r\n          formObj.password\r\n        );\r\n        if (isAuthenticated) {\r\n    \r\n          this.setState({\r\n              successMessage:\"Login Successfull\",\r\n              errMessage:''\r\n          });\r\n          \r\n          setTimeout(()=>this.props.history.push(\"/userview\"), 2500); \r\n          \r\n        }\r\n        else {\r\n          this.setState({\r\n              errMessage:\"Invalid username or password!\",\r\n            successMessage:\"\"\r\n          }\r\n          );\r\n        }\r\n      } catch (error) {\r\n          this.setState({\r\n              errMessage:error.message,\r\n              successMessage:\"\"\r\n          }\r\n          );\r\n      }\r\n    };\r\n  \r\n    handleSubmit = (e) => {\r\n      e.preventDefault();\r\n      let formObj={\r\n          email:this.state.formdata.email,\r\n          password:this.state.formdata.password\r\n      }\r\n      this.formSubmit(formObj);\r\n      \r\n    };\r\n  render() {\r\n    return (\r\n      <form className=\"container\"  onSubmit={this.handleSubmit} >\r\n      <div className=\"CreateBooking\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 offset-md-3\">\r\n            <br />\r\n            <div className=\"card\">\r\n              <div className=\"card-header bg-custom\">\r\n                <h3>LOGIN</h3>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                { \r\n                  <div class=\"form-group\">\r\n                  \r\n                  \r\n                  <label className=\"font-weight-bold\">Email Id:</label>\r\n                   <input type=\"email\" className=\"form-control\" \r\n                    value={this.state.formdata.email}\r\n                    \r\n                    name=\"email\" onChange={this.handleChange}\r\n                   ></input>\r\n                  <p className='text-danger'>{this.state.formError.emailErr}</p>\r\n\r\n                  <label className=\"font-weight-bold\">Password:</label>\r\n                   <input type=\"password\" className=\"form-control\" \r\n                   value={this.state.formdata.password}\r\n                   name=\"password\"\r\n                 onChange={this.handleChange}\r\n                   ></input>\r\n                    <p className='text-danger'>{this.state.formError.passErr}</p>\r\n                   </div>  \r\n                }\r\n                <br/>\r\n                <center><button type=\"submit\" className=\"btn btn-primary\" style={{width:\"500px\"}} \r\n               disabled={!(this.state.formError.emailErr === \"\" && this.state.formError.passErr === \"\")}\r\n                >Login</button></center>\r\n               <Link to=\"/register\" className=\"btn btn-link\">Register</Link>\r\n               <div align=\"center\">\r\n                    {\r\n                       <p className=\"text-success\">{this.state.successMessage}</p>\r\n                    }\r\n                    </div>\r\n                  <div align=\"center\">\r\n                    {\r\n                       <p className=\"text-danger\">{this.state.errMessage}</p>\r\n                    }\r\n                    \r\n                  </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}